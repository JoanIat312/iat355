<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="d3js/d3.min.js"></script>
		  <meta charset="utf-8">
		  <meta name="viewport" content="width=device-width">
		  <title>Assignment 2 Group 2</title>
	</head>
	<body>
		<script type="text/javascript">
			
			//load dataset from web
			d3.csv("http://www.sfu.ca/~yitingl/data.csv")
				.row(function(d){
					return d;
				})//end of row
				.get(function(error, points){
					//print title of the dataset and the sample size
					d3.select("body")
						.append("h2")
						.text("Proportion of the population using improved drinking water sources (%) of " +
						points.length + 
						" countries");
						
					//call operation function, passing dataset as argument
					operations(points);
				})//end of get
				
			//take dataset as parameter and calculate min, max, median and mean for each column
			//sum is not calculated since sum of percentage does not make sense to this dataset
			function operations(array){
				var keyArray = d3.keys(array[1]);
				var max, min, mean, median;
					//console.log(keyArray.length);
				for(i = 1; i < keyArray.length; i++){
				
					d3.select("body")
							.append("h3")
							.text(keyArray[i]);
							
					max = d3.max(array, function(d){
						return +d[keyArray[i]];
					});
					d3.select("body")
						.append("p")
						.text("Max:" + max);
						
					min = d3.min(array, function(d){
						return +d[keyArray[i]];
					});
					d3.select("body")
						.append("p")
						.text("Min: " + min);
					
					mean = d3.mean(array, function(d){
						return +d[keyArray[i]];
					});
					d3.select("body")
						.append("p")
						.text("Mean:" + mean.toFixed(2));
						
					median = d3.min(array, function(d){
						return +d[keyArray[i]];
					});
					d3.select("body")
						.append("p")
						.text("Median: " + median);
				}
			}// end of operation
			
		</script>
	</body>
</html>